<div
  (mouseleave)="reactionMenuOpenInTextarea = false; listOpen = false"
  (click)="listOpen = false; reactionMenuOpenInTextarea = false"
  class="input-container"
>
  <textarea
    (keyup.enter)="newMessage()"
    (input)="getList()"
    [(ngModel)]="input"
    rows="3"
    [name]="input"
    [placeholder]="placeholderText"
  ></textarea>

  <div class="action-container justify-sb">
    <div class="gap-10">
      @if (isChannelComponent) {
      <button
        (click)="reactionMenuOpenInTextarea = !reactionMenuOpenInTextarea; listOpen = false; $event.stopPropagation()"
        class="hover-to-dark-purple"
      >
        <mat-icon>sentiment_satisfied</mat-icon>
      </button>
      }

      <button (click)="getList('@'); $event.stopPropagation()" class="hover-to-dark-purple">
        <mat-icon>alternate_email</mat-icon>
      </button>
      <button (click)="getList('#'); $event.stopPropagation()" class="hover-to-dark-purple">
        <mat-icon>tag</mat-icon>
      </button>

      @if (reactions.length > 0) {
      <img [src]="'img/emojis/' + reactions[0]?.emoji + '.png'" alt="{{ reactions[0]?.emoji }}" />

      }
    </div>
    <button [disabled]="input.trim() == ''" (click)="newMessage()">
      <mat-icon class="hover-dark-purple-to-medium">send</mat-icon>
    </button>

    @if (listOpen) {
    <ul>
      @for (elemnent of currentList; track $index;) {
      <li (click)="openReciver(elemnent.key)">
        @if (isChannel) {
        <div><mat-icon>tag</mat-icon></div>
        } @else {
        <div class="userCircle">
          <img class="profilephoto" src="{{ elemnent?.profilephoto }}" alt="" />
          <div class="status-dot" [ngClass]="{ green: elemnent?.online }"></div>
        </div>
        }
        {{ elemnent.fullname || elemnent.data.name }}
      </li>
      }
    </ul>
    } @if (reactionMenuOpenInTextarea) {
    <div class="reaction-menu">
      @for (emoji of emojis; track $index) {
      <div (click)="addEmoji(emoji); reactionMenuOpenInTextarea = false" class="emoji">
        <img [src]="'img/emojis/' + emoji + '.png'" alt="{{ emoji }}" />
      </div>
      }
    </div>
    }
  </div>
</div>
